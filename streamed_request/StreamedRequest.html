        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>StreamedRequest class / streamed_request Library / Dart Documentation</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="//fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        </head>
        <body data-library="streamed_request" data-type="StreamedRequest">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">Dart Documentation</a>
         &rsaquo; <a href="../streamed_request.html">streamed_request</a> &rsaquo; <a href="../streamed_request/StreamedRequest.html">StreamedRequest</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
</div>
<div class="content">
        <h2><strong>StreamedRequest</strong>
          class
        </h2>
        
<button id="show-inherited" class="show-inherited">Hide inherited</button>
<div class="doc">
<p>An HTTP request where the request body is sent asynchronously after the
connection has been established and the headers have been sent.</p>
<p>When the request is sent via <code>BaseClient.send</code>, only the headers and
whatever data has already been written to <code>StreamedRequest.stream</code> will be
sent immediately. More data will be sent as soon as it's written to
<a class="crossref" href="../streamed_request/StreamedRequest.html#sink">StreamedRequest.sink</a>, and when the sink is closed the request will end.</p>
<pre class="source">
class StreamedRequest extends BaseRequest {
 /// The sink to which to write data that will be sent as the request body.
 /// This may be safely written to before the request is sent; the data will be
 /// buffered.
 ///
 /// Closing this signals the end of the request.
 EventSink&lt;List&lt;int&gt;&gt; get sink =&gt; _controller.sink;

 /// The controller for [sink], from which [BaseRequest] will read data for
 /// [finalize].
 final StreamController&lt;List&lt;int&gt;&gt; _controller;

 /// Creates a new streaming request.
 StreamedRequest(String method, Uri url)
   : super(method, url),
     _controller = new StreamController&lt;List&lt;int&gt;&gt;();

 /// Freezes all mutable fields other than [stream] and returns a
 /// single-subscription [ByteStream] that emits the data being written to
 /// [sink].
 ByteStream finalize() {
   super.finalize();
   return new ByteStream(_controller.stream);
 }
}
</pre>
</div>
<h3>Extends</h3>
<p>
<span class="type-box"><span class="icon-class"></span><a href="../base_request/BaseRequest.html">BaseRequest</a></span>&nbsp;&gt;&nbsp;<span class="type-box"><span class="icon-class"></span><strong>StreamedRequest</strong></span></p>
<div>
<h3>Constructors</h3>
<div class="method"><h4 id="StreamedRequest">
<button class="show-code">Code</button>
new <strong>StreamedRequest</strong>(<a href="http://api.dartlang.org/dart_core/String.html">String</a> method, <a href="http://api.dartlang.org/dart_uri/Uri.html">Uri</a> url) <a class="anchor-link" href="#StreamedRequest"
              title="Permalink to StreamedRequest.StreamedRequest">#</a></h4>
<div class="doc">
<p>Creates a new streaming request.</p>
<pre class="source">
StreamedRequest(String method, Uri url)
 : super(method, url),
   _controller = new StreamController&lt;List&lt;int&gt;&gt;();
</pre>
</div>
</div>
</div>
<div>
<h3>Properties</h3>
<div class="field inherited"><h4 id="contentLength">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/int.html">int</a>         <strong>contentLength</strong> <a class="anchor-link"
            href="#contentLength"
            title="Permalink to StreamedRequest.contentLength">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../base_request/BaseRequest.html">BaseRequest</a> </div><div class="doc">
<p>The size of the request body, in bytes. This defaults to -1, which
indicates that the size of the request is not known in advance.</p>
<pre class="source">
int get contentLength =&gt; _contentLength;
</pre>
<pre class="source">
set contentLength(int value) {
 _checkFinalized();
 _contentLength = value;
}
</pre>
</div>
</div>
<div class="field inherited"><h4 id="finalized">
<button class="show-code">Code</button>
final <a href="http://api.dartlang.org/dart_core/bool.html">bool</a>         <strong>finalized</strong> <a class="anchor-link"
            href="#finalized"
            title="Permalink to StreamedRequest.finalized">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../base_request/BaseRequest.html">BaseRequest</a> </div><div class="doc">
<p>Whether the request has been finalized.</p>
<pre class="source">
bool get finalized =&gt; _finalized;
</pre>
</div>
</div>
<div class="field inherited"><h4 id="followRedirects">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/bool.html">bool</a>         <strong>followRedirects</strong> <a class="anchor-link"
            href="#followRedirects"
            title="Permalink to StreamedRequest.followRedirects">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../base_request/BaseRequest.html">BaseRequest</a> </div><div class="doc">
<p>Whether the client should follow redirects while resolving this request.
Defaults to true.</p>
<pre class="source">
bool get followRedirects =&gt; _followRedirects;
</pre>
<pre class="source">
set followRedirects(bool value) {
 _checkFinalized();
 _followRedirects = value;
}
</pre>
</div>
</div>
<div class="field inherited"><h4 id="headers">
<button class="show-code">Code</button>
final <a href="http://api.dartlang.org/dart_core/Map.html">Map</a>&lt;<a href="http://api.dartlang.org/dart_core/String.html">String</a>, <a href="http://api.dartlang.org/dart_core/String.html">String</a>&gt;         <strong>headers</strong> <a class="anchor-link"
            href="#headers"
            title="Permalink to StreamedRequest.headers">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../base_request/BaseRequest.html">BaseRequest</a> </div><div class="doc">
<p>The headers for this request.</p>
<pre class="source">
final Map&lt;String, String&gt; headers
</pre>
</div>
</div>
<div class="field inherited"><h4 id="maxRedirects">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/int.html">int</a>         <strong>maxRedirects</strong> <a class="anchor-link"
            href="#maxRedirects"
            title="Permalink to StreamedRequest.maxRedirects">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../base_request/BaseRequest.html">BaseRequest</a> </div><div class="doc">
<p>The maximum number of redirects to follow when <code>followRedirects</code> is true.
If this number is exceeded the <code>BaseResponse</code> future will signal a
<code>RedirectLimitExceeded</code> exception. Defaults to 5.</p>
<pre class="source">
int get maxRedirects =&gt; _maxRedirects;
</pre>
<pre class="source">
set maxRedirects(int value) {
 _checkFinalized();
 _maxRedirects = value;
}
</pre>
</div>
</div>
<div class="field inherited"><h4 id="method">
<button class="show-code">Code</button>
final <a href="http://api.dartlang.org/dart_core/String.html">String</a>         <strong>method</strong> <a class="anchor-link"
            href="#method"
            title="Permalink to StreamedRequest.method">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../base_request/BaseRequest.html">BaseRequest</a> </div><div class="doc">
<p>The HTTP method of the request. Most commonly "GET" or "POST", less
commonly "HEAD", "PUT", or "DELETE". Non-standard method names are also
supported.</p>
<pre class="source">
final String method
</pre>
</div>
</div>
<div class="field inherited"><h4 id="persistentConnection">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/bool.html">bool</a>         <strong>persistentConnection</strong> <a class="anchor-link"
            href="#persistentConnection"
            title="Permalink to StreamedRequest.persistentConnection">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../base_request/BaseRequest.html">BaseRequest</a> </div><div class="doc">
<p>Whether a persistent connection should be maintained with the server.
Defaults to true.</p>
<pre class="source">
bool get persistentConnection =&gt; _persistentConnection;
</pre>
<pre class="source">
set persistentConnection(bool value) {
 _checkFinalized();
 _persistentConnection = value;
}
</pre>
</div>
</div>
<div class="field"><h4 id="sink">
<button class="show-code">Code</button>
final <a href="http://api.dartlang.org/dart_async/EventSink.html">EventSink</a>&lt;<a href="http://api.dartlang.org/dart_core/List.html">List</a>&lt;<a href="http://api.dartlang.org/dart_core/int.html">int</a>&gt;&gt;         <strong>sink</strong> <a class="anchor-link"
            href="#sink"
            title="Permalink to StreamedRequest.sink">#</a>
        </h4>
        <div class="doc">
<p>The sink to which to write data that will be sent as the request body.
This may be safely written to before the request is sent; the data will be
buffered.</p>
<p>Closing this signals the end of the request.</p>
<pre class="source">
EventSink&lt;List&lt;int&gt;&gt; get sink =&gt; _controller.sink;
</pre>
</div>
</div>
<div class="field inherited"><h4 id="url">
<button class="show-code">Code</button>
final <a href="http://api.dartlang.org/dart_uri/Uri.html">Uri</a>         <strong>url</strong> <a class="anchor-link"
            href="#url"
            title="Permalink to StreamedRequest.url">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../base_request/BaseRequest.html">BaseRequest</a> </div><div class="doc">
<p>The URL to which the request will be sent.</p>
<pre class="source">
final Uri url
</pre>
</div>
</div>
</div>
<div>
<h3>Methods</h3>
<div class="method"><h4 id="finalize">
<button class="show-code">Code</button>
<a href="../byte_stream/ByteStream.html">ByteStream</a> <strong>finalize</strong>() <a class="anchor-link" href="#finalize"
              title="Permalink to StreamedRequest.finalize">#</a></h4>
<div class="doc">
<p>Freezes all mutable fields other than <code>stream</code> and returns a
single-subscription <code>ByteStream</code> that emits the data being written to
<a class="crossref" href="../streamed_request/StreamedRequest.html#sink">sink</a>.</p>
<pre class="source">
ByteStream finalize() {
 super.finalize();
 return new ByteStream(_controller.stream);
}
</pre>
</div>
</div>
<div class="method inherited"><h4 id="send">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_async/Future.html">Future</a>&lt;<a href="../streamed_response/StreamedResponse.html">StreamedResponse</a>&gt; <strong>send</strong>() <a class="anchor-link" href="#send"
              title="Permalink to StreamedRequest.send">#</a></h4>
<div class="inherited-from">inherited from <a href="../base_request/BaseRequest.html">BaseRequest</a> </div><div class="doc">
<p>Sends this request.</p>
<p>This automatically initializes a new <code>Client</code> and closes that client once
the request is complete. If you're planning on making multiple requests to
the same server, you should use a single <code>Client</code> for all of those
requests.</p>
<pre class="source">
Future&lt;StreamedResponse&gt; send() {
 var client = new Client();
 return client.send(this).then((response) {
   var stream = onDone(response.stream, client.close);
   return new StreamedResponse(
       new ByteStream(stream),
       response.statusCode,
       response.contentLength,
       request: response.request,
       headers: response.headers,
       isRedirect: response.isRedirect,
       persistentConnection: response.persistentConnection,
       reasonPhrase: response.reasonPhrase);
 }).catchError((e) {
   client.close();
   throw e;
 });
}
</pre>
</div>
</div>
<div class="method inherited"><h4 id="toString">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/String.html">String</a> <strong>toString</strong>() <a class="anchor-link" href="#toString"
              title="Permalink to StreamedRequest.toString">#</a></h4>
<div class="inherited-from">inherited from <a href="../base_request/BaseRequest.html">BaseRequest</a> </div><div class="doc">
<div class="inherited">
<p>Returns a string representation of this object.</p>
<div class="docs-inherited-from">docs inherited from <a href="http://api.dartlang.org/dart_core/Object.html">Object</a> </div></div>
<pre class="source">
String toString() =&gt; "$method $url";
</pre>
</div>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        <div class="footer">
          
        </div>
        <script async src="../client-live-nav.js"></script>
        </body></html>
        
